<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Figura Rostro KG - Estética Integral</title>

<style>
/* =======================
   Base segura (neutra)
   ======================= */
:root{
  --violeta:#5b3bb6;
  --violeta-osc:#4a2fa0;
  --gris:#333;
  --gris-soft:#666;
  --bg:#f5f5f5;
  --bg-dark:#0f0f12;
  --text:#222;
  --text-inv:#e9e9ef;
  --card:#fff;
  --shadow:0 14px 34px rgba(0,0,0,.30);
  --radius:16px;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

img{max-width:100%;height:auto;display:block}

/* Titulares */
h1,h2,h3{margin:0 0 10px 0;color:var(--violeta)}

/* Cards genéricas */
.card,.about-card,.video-card,.offer-card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
}

/* Footer base (escritorio) */
.site-footer{
  background:#fff;
  color:#333;
}
.site-footer a{color:var(--violeta)}
.site-footer .legal{border-top:1px solid #eaeaea}

/* =======================
   Promos del Mes general
   ======================= */
#ofertas .offer-card{
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
  padding:16px;
}
#ofertas .offer-img{border-radius:var(--radius);overflow:hidden}

/* =======================
   LIGHTBOX Galería
   ======================= */
dialog#lightbox .lightbox-body{background:#111}
dialog#lightbox .lightbox-body img,
dialog#lightbox .lightbox-body video{
  display:block;margin:0 auto;
  width:auto;height:auto;
  max-width:min(100vw,980px);
  max-height:86vh;
  object-fit:contain;
  background:#111;
}

/* =================================================================
   MÓVIL (≤640px) – encapsulamos todo lo “oscuro” y los cambios nuevos
   ================================================================= */
@media (max-width:640px){

  /* Tema oscuro SOLO en móvil */
  body{ background:var(--bg-dark); color:var(--text-inv) }

  /* Cards claras sobre fondo oscuro */
  .card,.about-card,.video-card,.offer-card{
    background:#fff; color:#2b2b2b; box-shadow:var(--shadow);
  }

  /* Footer oscuro solo móvil */
  .site-footer{ background:var(--bg-dark) !important; color:var(--text-inv) }
  .site-footer a{ color:#bca7ff }
  .site-footer .legal{ border-top-color:rgba(255,255,255,.08) }

  /* Títulos de bloques “Tratamientos …” */
  #tratamientos-faciales > h2,
  #tratamientos-corporales > h2{
    margin-top:28px !important;
    margin-bottom:16px !important;
    letter-spacing:.2px;
  }

  /* Corte suave entre secciones */
  #tratamientos-faciales,
  #tratamientos-corporales{ padding-top:10px }

  /* Limitar a 3 servicios en móvil */
  #tratamientos-faciales .carousel-grid .card:nth-child(n+4),
  #tratamientos-corporales .carousel-grid .card:nth-child(n+4){
    display:none !important;
  }

  /* Promos del Mes: imagen estable sin distorsión */
  #ofertas .offer-img{
    aspect-ratio:4/3;
    background:#000;
    overflow:hidden;
    border-radius:var(--radius);
  }
  #ofertas .offer-img img{
    width:100%; height:100%; object-fit:cover; display:block;
  }

  /* Visor de Promos (modal) estable, sin saltos ni “aplastes” */
  .promo-modal .pm-img{
    width:100%;
    max-height:78vh;
    background:#000;
    display:flex; align-items:center; justify-content:center;
  }
  .promo-modal .pm-img img{
    max-width:100%; max-height:78vh;
    width:auto; height:auto;
    object-fit:contain; display:block;
  }

  /* Animaciones de entrada/salida del visor */
  .promo-view{
    transform:scale(.94);
    opacity:0;
    transition: transform .35s ease, opacity .35s ease;
  }
  .promo-modal.open .promo-view{ transform:scale(1); opacity:1 }
  .promo-modal.closing .promo-view{ transform:scale(.98); opacity:0 }

  /* Lightbox Galería móvil */
  dialog#lightbox .lightbox-body{background:#111}
  dialog#lightbox .lightbox-body img,
  dialog#lightbox .lightbox-body video{
    display:block;margin:0 auto;
    width:auto;height:auto;
    max-width:100vw; max-height:86vh;
    object-fit:contain;background:#111;
  }
}

/* =================================================================
   ESCRITORIO (≥641px) – restauramos el look claro y layout original
   ================================================================= */
@media (min-width:641px){
  body{ background:var(--bg); color:var(--text) }

  .site-footer{ background:#fff !important; color:#333 }
  .site-footer a{ color:var(--violeta) }
  .site-footer .legal{ border-top-color:#eaeaea }

  .footer-inner{
    display:grid; grid-template-columns:1fr 1fr 1fr; gap:24px; align-items:start;
  }

  #ofertas .offer-img img{ object-fit:cover }
}
</style>

</head>

<body>
  <header>
    <img src="logo-horizontal.png" alt="Figura Rostro KG" class="logo" />
    <h1>Bienvenidos a Figura Rostro KG</h1>
    <p>Tu centro de estética integral en Panamá</p>
  </header>

  <!-- SOBRE + VIDEO -->
  <section id="sobre">
    <div class="about-card">
      <h2>Somos tu Estética Integral en Parque Lefevre</h2>
      <p>Estamos en Royal Park – Av. Ernesto T. Lefevre, Ciudad de Panamá. Técnicas profesionales con trato cálido para una piel más luminosa y bienestar total.</p>
      <p>En nuestro canal compartimos tips y demostraciones de tratamientos. ¡Suscríbete!</p>
    </div>
    <div class="video-card">
      <div class="ratio">
        <iframe id="yt-embed" src="https://www.youtube.com/embed/II9Jexh_MgE?rel=0" title="Video de Figura Rostro KG" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      </div>
      <div class="video-actions">
        <a class="video-btn" id="yt-open" href="https://www.youtube.com/watch?v=II9Jexh_MgE" target="_blank" rel="noopener">▶ Ver en YouTube</a>
        <button class="video-btn" id="yt-full">⤢ Pantalla completa</button>
      </div>
    </div>
  </section>

  <!-- MENÚ DE SERVICIOS (solo visible en desktop por CSS) -->
  <section id="menu-servicios">
    <h2>Menú de Servicios</h2>

    <div class="tabs" role="tablist" aria-label="Categorías de servicios">
      <button class="tab-btn active" data-tab="faciales-tab" role="tab" aria-selected="true">Faciales</button>
      <button class="tab-btn" data-tab="masajes-tab" role="tab" aria-selected="false">Masajes y Terapias</button>
      <button class="tab-btn" data-tab="especiales-tab" role="tab" aria-selected="false">Especializados</button>
    </div>

    <!-- FACIALES (6) -->
    <div id="faciales-tab" class="tab-panel">
      <div class="srv-grid">
        <article class="srv-card">
          <h3>Limpieza Facial con Extracción</h3><div class="srv-meta">45–60 min aprox.</div>
          <p>Higiene profunda, extracción, mascarilla hidratante y Vitamina C.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales","carousel":"facialesCarousel","slide":0}'>Reservar por WhatsApp</a>
        </article>
        <article class="srv-card">
          <h3>Facial con Dermaplaning</h3><div class="srv-meta">50 min aprox.</div>
          <p>Piel más suave y luminosa; ayuda a reducir marcas leves de acné.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales","carousel":"facialesCarousel","slide":1}'>Reservar por WhatsApp</a>
        </article>
        <article class="srv-card">
          <h3>Hilos de Colágeno sin Agujas</h3><div class="srv-meta">Sesión personalizada</div>
          <p>Efecto rejuvenecedor visible desde la primera sesión (costo según evaluación).</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales"}'>Agendar evaluación</a>
        </article>
        <article class="srv-card">
          <h3>Peeling + Limpieza Profunda</h3><div class="srv-meta">50–60 min aprox.</div>
          <p>Reduce manchas y líneas finas; mejora textura y luminosidad.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales","carousel":"facialesCarousel","slide":0}'>Reservar</a>
        </article>
        <article class="srv-card">
          <h3>Microdermoabrasión</h3><div class="srv-meta">45 min aprox.</div>
          <p>Exfoliación controlada para suavizar poros y renovar el tono de la piel.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales"}'>Reservar</a>
        </article>
        <article class="srv-card">
          <h3>Radiofrecuencia Facial</h3><div class="srv-meta">45–60 min aprox.</div>
          <p>Estimulación térmica para firmeza y apariencia más compacta.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales"}'>Reservar</a>
        </article>
      </div>
    </div>

    <!-- MASAJES Y TERAPIAS (6) -->
    <div id="masajes-tab" class="tab-panel hidden">
      <div class="srv-grid">
        <article class="srv-card">
          <h3>Relajante Completo</h3><div class="srv-meta">60 min aprox.</div>
          <p>Técnicas terapéuticas para aliviar tensión y equilibrar el cuerpo.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-corporales"}'>Reservar</a>
        </article>
        <article class="srv-card">
          <h3>Masaje Descontracturante</h3><div class="srv-meta">45–60 min aprox.</div>
          <p>Focalizado en cuello y espalda para aliviar tensiones y mejorar movilidad.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-corporales","carousel":"corporalesCarousel","slide":0}'>Reservar</a>
        </article>
        <article class="srv-card">
          <h3>Masaje Reductor</h3><div class="srv-meta">45 min aprox.</div>
          <p>Maniobras específicas para moldear, activar circulación y mejorar contorno.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-corporales","carousel":"corporalesCarousel","slide":0}'>Reservar</a>
        </article>
        <article class="srv-card">
          <h3>Piernas y Espalda Cansada</h3><div class="srv-meta">50 min aprox.</div>
          <p>Alivio de pesadez y descanso muscular en zonas clave.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-corporales"}'>Reservar</a>
        </article>
        <article class="srv-card">
          <h3>Drenaje Post Operatorio</h3><div class="srv-meta">Sesión según indicación</div>
          <p>Apoyo profesional para reducir edema y favorecer recuperación.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-corporales","carousel":"corporalesCarousel","slide":1}'>Reservar</a>
        </article>
        <article class="srv-card">
          <h3>Terapia para Adultos Mayores</h3><div class="srv-meta">Sesión personalizada</div>
          <p>Maniobras suaves y seguras para bienestar, movilidad y descanso.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-corporales","carousel":"corporalesCarousel","slide":1}'>Reservar</a>
        </article>
      </div>
    </div>

    <!-- ESPECIALIZADOS (6) -->
    <div id="especiales-tab" class="tab-panel hidden">
      <div class="srv-grid">
        <article class="srv-card">
          <h3>Membresía VIP</h3><div class="srv-meta">Mensual / anual</div>
          <p>Ahorra durante todo el año en tus tratamientos favoritos.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales"}'>Solicitar info</a>
        </article>
        <article class="srv-card">
          <h3>Hialuron Pen</h3><div class="srv-meta">Sesión personalizada</div>
          <p>Hidratación y volumen de labios sin agujas, de forma no invasiva.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales"}'>Agendar consulta</a>
        </article>
        <article class="srv-card">
          <h3>Plasma Rico en Plaquetas</h3><div class="srv-meta">Sesión personalizada</div>
          <p>Bioestimulación para mejorar aspecto de piel y estimular el cabello.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales"}'>Agendar consulta</a>
        </article>
        <article class="srv-card">
          <h3>Rejuvenecimiento Facial y Corporal</h3><div class="srv-meta">Plan de sesiones</div>
          <p>Protocolos combinados no invasivos para firmeza y luminosidad.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales","carousel":"facialesCarousel","slide":1}'>Conocer plan</a>
        </article>
        <article class="srv-card">
          <h3>Tratamiento Antiacné</h3><div class="srv-meta">Sesión + plan</div>
          <p>Limpieza activa y cuidado de apoyo para piel con tendencia acneica.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales"}'>Evaluación</a>
        </article>
        <article class="srv-card">
          <h3>Glow Express (Evento)</h3><div class="srv-meta">40–50 min aprox.</div>
          <p>Ilumina y alisa la piel para ocasiones especiales, sin tiempo de baja.</p>
          <a class="srv-cta" href="https://wa.me/50764746168" target="_blank" rel="noopener"
             data-go='{"section":"tratamientos-faciales"}'>Reservar</a>
        </article>
      </div>
    </div>
  </section>

  <!-- FACIALES (CARRUSEL) -->
  <section id="tratamientos-faciales">
    <h2>Tratamientos Faciales</h2>
    <div class="carousel" id="facialesCarousel" aria-roledescription="carousel">
      <div class="carousel-viewport" aria-live="polite">
        <div class="carousel-track">
          <div class="carousel-slide" role="group" aria-label="1 de 2">
            <div class="carousel-grid">
              <article class="card">
                <img src="facial-limpieza.jpg" alt="Limpieza Facial Premium" width="800" height="500" loading="lazy" onerror="this.src='banner-spa.png'">
                <div class="box"><h3>Limpieza Facial Premium</h3><p>Higiene profunda + mascarilla nutritiva. Ideal para piel opaca o con impurezas.</p></div>
              </article>
              <article class="card">
                <img src="facial-peeling.jpg" alt="Peeling Facial" width="800" height="500" loading="lazy" onerror="this.src='banner-spa.png'">
                <div class="box"><h3>Peeling Facial</h3><p>Renovación de la piel para un tono más uniforme y luminoso.</p></div>
              </article>
            </div>
          </div>
          <div class="carousel-slide" role="group" aria-label="2 de 2">
            <div class="carousel-grid">
              <article class="card">
                <img src="facial-dermaplaning.jpg" alt="Dermaplaning" width="800" height="500" loading="lazy" onerror="this.src='banner-spa.png'">
                <div class="box"><h3>Dermaplaning</h3><p>Elimina células muertas y vello fino para una piel más suave y radiante.</p></div>
              </article>
              <article class="card">
                <img src="rejuvenecimiento-facial-corporal.jpg" alt="Rejuvenecimiento facial y corporal" width="800" height="500" loading="lazy" onerror="this.src='banner-spa.png'">
                <div class="box"><h3>Rejuvenecimiento facial y corporal</h3><p>Protocolos combinados no invasivos para firmeza, brillo y textura uniforme.</p></div>
              </article>
            </div>
          </div>
        </div>
      </div>
      <button class="carousel-nav prev" aria-label="Anterior">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 19 8.5 12l7-7"/></svg>
      </button>
      <button class="carousel-nav next" aria-label="Siguiente">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="m8.5 5 7 7-7 7"/></svg>
      </button>
      <div class="carousel-dots" role="tablist" aria-label="Paginación"></div>
    </div>
  </section>

  <!-- CORPORALES (CARRUSEL) -->
  <section id="tratamientos-corporales">
    <h2>Tratamientos Corporales</h2>
    <div class="carousel" id="corporalesCarousel" aria-roledescription="carousel">
      <div class="carousel-viewport" aria-live="polite">
        <div class="carousel-track">
          <div class="carousel-slide" role="group" aria-label="1 de 2">
            <div class="carousel-grid">
              <article class="card">
                <img src="masaje-descontracturante.jpg" alt="Masaje Descontracturante" width="800" height="500" loading="lazy" onerror="this.src='banner-spa.png'">
                <div class="box"><h3>Masaje Descontracturante</h3><p>Focalizado en cuello y espalda para aliviar tensiones y mejorar movilidad.</p></div>
              </article>
              <article class="card">
                <img src="masaje-reductor.jpg" alt="Masaje Reductor" width="800" height="500" loading="lazy" onerror="this.src='banner-spa.png'">
                <div class="box"><h3>Masaje Reductor</h3><p>Maniobras específicas para moldear, activar circulación y mejorar contorno.</p></div>
              </article>
            </div>
          </div>
          <div class="carousel-slide" role="group" aria-label="2 de 2">
            <div class="carousel-grid">
              <article class="card">
                <img src="terapia-adultos-mayores.jpg" alt="Terapia para adultos mayores" width="800" height="500" loading="lazy" onerror="this.src='banner-spa.png'">
                <div class="box"><h3>Terapia para adultos mayores</h3><p>Sesiones suaves y seguras para aliviar dolor, mejorar descanso y bienestar.</p></div>
              </article>
              <article class="card">
                <img src="drenaje-post-operatorio.jpg" alt="Drenajes post operatorios" width="800" height="500" loading="lazy" onerror="this.src='banner-spa.png'">
                <div class="box"><h3>Drenajes post operatorios</h3><p>Apoyo profesional para reducir edema y acelerar recuperación (según indicación).</p></div>
              </article>
            </div>
          </div>
        </div>
      </div>
      <button class="carousel-nav prev" aria-label="Anterior">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 19 8.5 12l7-7"/></svg>
      </button>
      <button class="carousel-nav next" aria-label="Siguiente">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="m8.5 5 7 7-7 7"/></svg>
      </button>
      <div class="carousel-dots" role="tablist" aria-label="Paginación"></div>
    </div>
  </section>

  <!-- OFERTAS -->
  <section id="ofertas">
    <h2>Promos del Mes 💎</h2>
    <div class="offers-carousel" aria-roledescription="carousel">
      <div class="offers-viewport" aria-live="polite">
        <div class="offers-track">
          <article class="offer-slide" role="group" aria-label="1 de 3">
            <div class="offer-card">
              <div class="offer-info">
                <h3>✨ Combo Relax Premium</h3>
                <p>Masaje relajante + limpieza facial premium con mascarilla hidratante.</p>
                <p>Antes <s>$110</s> · Ahora <b class="precio">$85</b></p>
                <a href="https://wa.me/50764746168" target="_blank" class="btn">Reservar combo a $85</a>
              </div>
              <div class="offer-img"><img src="oferta-demo-1.jpg.png" alt="Promo Combo Relax Premium" loading="lazy"></div>
            </div>
          </article>
          <article class="offer-slide" role="group" aria-label="2 de 3">
            <div class="offer-card">
              <div class="offer-info">
                <h3>🌟 Peeling Facial Unisex</h3>
                <p>Renueva tu piel y luce un rostro más luminoso.</p>
                <p>Antes <s>$120</s> · Ahora <b class="precio">$85</b></p>
                <a href="https://wa.me/50764746168" target="_blank" class="btn">Tomar peeling a $85</a>
              </div>
              <div class="offer-img"><img src="oferta-demo-2.jpg.png" alt="Promo Peeling Facial Unisex" loading="lazy"></div>
            </div>
          </article>
          <article class="offer-slide" role="group" aria-label="3 de 3">
            <div class="offer-card">
              <div class="offer-info">
                <h3>💆 Descontracturante + Limpieza</h3>
                <p>Alivia tensiones musculares y relaja cuerpo y mente.</p>
                <p>Antes <s>$110</s> · Ahora <b class="precio">$95</b></p>
                <a href="https://wa.me/50764746168" target="_blank" class="btn">Reservar pack a $95</a>
              </div>
              <div class="offer-img"><img src="promo-masaje-limpieza.jpg" alt="Promo Masaje + Limpieza" loading="lazy"></div>
            </div>
          </article>
        </div>
      </div>
      <button class="offer-nav prev" aria-label="Oferta anterior" title="Anterior">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 19 8.5 12l7-7"/></svg>
      </button>
      <button class="offer-nav next" aria-label="Siguiente oferta" title="Siguiente">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="m8.5 5 7 7-7 7"/></svg>
      </button>
      <div class="offer-dots" role="tablist" aria-label="Selector de ofertas">
        <button class="dot" role="tab" aria-selected="true" title="Oferta 1"></button>
        <button class="dot" role="tab" aria-selected="false" title="Oferta 2"></button>
        <button class="dot" role="tab" aria-selected="false" title="Oferta 3"></button>
      </div>
    </div>

  <!-- Promos (versión móvil por scroll-snap) -->
<div class="offers-mobile">
  <div class="m-scroll">

    <!-- Promo 1 -->
    <article class="m-offer">
      <div class="m-body">
        <h3>✨ Combo Relax Premium</h3>
        <p>Masaje relajante + limpieza facial premium con mascarilla hidratante.</p>
        <p class="price">Antes <s>$110</s> · Ahora <b>$85</b></p>
        <a href="https://wa.me/50764746168?text=Hola%20Figura%20Rostro%20KG%2C%20quiero%20reservar%20el%20Combo%20Relax%20Premium%20a%2085" target="_blank" class="m-btn">Reservar combo a $85</a>
      </div>
      <div class="m-img">
        <img src="promo-masaje-limpieza.jpg" alt="Promo Combo Relax Premium">
      </div>
    </article>

    <!-- Promo 2 -->
    <article class="m-offer">
      <div class="m-body">
        <h3>🌟 Peeling Facial Unisex</h3>
        <p>Renueva tu piel y luce un rostro más luminoso.</p>
        <p class="price">Antes <s>$120</s> · Ahora <b>$85</b></p>
        <a href="https://wa.me/50764746168?text=Hola%20Figura%20Rostro%20KG%2C%20quiero%20tomar%20el%20Peeling%20Facial%20a%2085" target="_blank" class="m-btn">Tomar peeling a $85</a>
      </div>
      <div class="m-img">
        <img src="oferta-demo-2.jpg.png" alt="Promo Peeling Facial Unisex">
      </div>
    </article>

    <!-- Promo 3 -->
    <article class="m-offer">
      <div class="m-body">
        <h3>💆 Descontracturante + Limpieza</h3>
        <p>Alivia tensiones musculares y relaja cuerpo y mente.</p>
        <p class="price">Antes <s>$110</s> · Ahora <b>$95</b></p>
        <a href="https://wa.me/50764746168?text=Hola%20Figura%20Rostro%20KG%2C%20quiero%20reservar%20el%20pack%20Descontracturante%20%2B%20Limpieza%20a%2095" target="_blank" class="m-btn">Reservar pack a $95</a>
      </div>
      <div class="m-img">
        <img src="banner-spa.png" alt="Promo Masaje + Limpieza">
      </div>
    </article>

  </div>
  <!-- puntos decorativos -->
  <div class="m-dots"><span></span><span></span><span></span></div>
</div>
<!-- Promo 1 -->
<article class="m-offer">
  ...
  <div class="m-img">
    <img src="promo-masaje-limpieza.jpg"
         alt="Promo Combo Relax Premium"
         onerror="this.src='banner-spa.png'">
  </div>
</article>

<!-- Promo 2 -->
<article class="m-offer">
  ...
  <div class="m-img">
    <img src="oferta-demo-2.jpg.png"
         alt="Promo Peeling Facial Unisex"
         onerror="this.src='banner-spa.png'">
  </div>
</article>

<!-- Promo 3 -->
<article class="m-offer">
  ...
  <div class="m-img">
    <img src="banner-spa.png"
         alt="Promo Masaje + Limpieza"
         onerror="this.src='banner-spa.png'">
  </div>
</article>

  </section>

  <!-- PRODUCTOS EN VENTA -->
  <section id="productos">
    <h2>Productos en venta</h2>
    <div class="product-scroll">
      <article class="prod-card" data-producto="Gel Limpiador Facial" data-precio="18">
        <img src="producto-gel-limpiador.jpg" alt="Gel Limpiador Facial" onerror="this.src='banner-spa.png'">
        <div class="prod-info">
          <h3>Gel Limpiador Facial</h3>
          <p>Suave, todo tipo de piel.</p>
        </div>
        <div class="prod-price">$18</div>
        <a href="#" class="prod-cta" data-whatsapp>Solicitar</a>
      </article>

      <article class="prod-card" data-producto="Sérum Vitamina C" data-precio="28">
        <img src="producto-serum-vitamina-c.jpg" alt="Sérum Vitamina C" onerror="this.src='banner-spa.png'">
        <div class="prod-info">
          <h3>Sérum Vitamina C</h3>
          <p>Luminosidad y antioxidantes.</p>
        </div>
        <div class="prod-price">$28</div>
        <a href="#" class="prod-cta" data-whatsapp>Solicitar</a>
      </article>

      <article class="prod-card" data-producto="Crema Hidratante SPF" data-precio="24">
        <img src="producto-crema-spf.jpg" alt="Crema Hidratante SPF" onerror="this.src='banner-spa.png'">
        <div class="prod-info">
          <h3>Crema Hidratante SPF</h3>
          <p>Hidratación + protección diaria.</p>
        </div>
        <div class="prod-price">$24</div>
        <a href="#" class="prod-cta" data-whatsapp>Solicitar</a>
      </article>
    </div>
  </section>
<!-- KERATINA ORGÁNICA (móvil y desktop) -->
<section id="keratina" class="keratin-section">
  <div class="k-card">
    <div class="k-text">
      <h2>Keratina Orgánica</h2>
      <p>
        Tratamiento de suavizado y control del frizz con fórmulas sin formaldehído.
        Ayuda a dejar el cabello más manejable, con brillo y apariencia saludable.
        Trabajamos con la línea <b>Bio Tanix</b>.
      </p>
      <a class="video-btn" href="https://www.youtube.com/watch?v=XXXXXXXX" target="_blank" rel="noopener">Ver video</a>
    </div>
    <div class="k-video">
      <div class="ratio">
        <iframe src="https://www.youtube.com/embed/XXXXXXXX?rel=0"
                title="Keratina Orgánica Bio Tanix" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
      </div>
    </div>
  </div>
</section>

  <!-- GALERÍA -->
  <section id="galeria">
    <h2>Galería & Instagram</h2>
    <div class="media-grid" id="mediaGrid">
      <figure data-type="image" data-src="galeria-demo-1.jpg.png">
        <img src="galeria-demo-1.jpg.png" alt="Tratamiento facial premium">
      </figure>
      <figure data-type="image" data-src="galeria-demo-2.jpg.png">
        <img src="galeria-demo-2.jpg.png" alt="Masaje terapéutico relajante">
      </figure>
      <figure data-type="video" data-src="galeria-video-thumb-demo.jpg.mp4" data-poster="banner-spa.png">
        <img src="banner-spa.png" alt="Video testimonio">
      </figure>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="site-footer">
    <footer class="site-footer">
  <div class="footer-inner">

    <!-- LOGO ARRIBA -->
    <div class="footer-info">
      <img src="logo-horizontal.png" alt="Figura Rostro KG" class="logo" />

      <h5>Horario</h5>
      <p>
        Lun – Vie: 6 AM – 8 PM<br>
        Sáb: 9 AM – 8 PM · Dom: 10 AM – 5 PM
      </p>

      <h5>Ubicación</h5>
      <p>
        Ave. Ernesto T. Lefevre, PH Royal Park, Local 15PB,<br>
        Ciudad de Panamá
      </p>

      <h5>Contacto</h5>
      <p>
        <a href="tel:+50764746168" style="color:#fff;text-decoration:underline;">+507 6474-6168</a><br>
        <a href="mailto:figurarostro25@gmail.com" style="color:#fff;text-decoration:underline;">figurarostro25@gmail.com</a>
      </p>
    </div>

    <!-- ICONOS DE REDES SOCIALES -->
    <div class="social">
      <div class="icons">
        <a href="https://www.instagram.com/figurarostrokg" class="ico" target="_blank" aria-label="Instagram">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://www.facebook.com/figurarostrokg" class="ico" target="_blank" aria-label="Facebook">
          <i class="fab fa-facebook"></i>
        </a>
        <a href="https://www.youtube.com/@figurarostrokg" class="ico" target="_blank" aria-label="YouTube">
          <i class="fab fa-youtube"></i>
        </a>
        <a href="https://wa.me/50764746168" class="ico" target="_blank" aria-label="WhatsApp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </div>
    </div>

    <!-- COPYRIGHT -->
    <div class="legal">
      © 2025 Figura Rostro KG · Todos los derechos reservados
    </div>

  </div>
</footer>

  </footer>

  <!-- FABs -->
  <div class="fab-stack" aria-label="Accesos rápidos">
    <a class="fab menu" href="#menu-servicios" id="fabMenu" aria-label="Ver menú de servicios" title="Ver menú">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 6h18v2H3V6Zm0 5h18v2H3v-2Zm0 5h18v2H3v-2Z"/></svg>
    </a>
    <a class="fab waze" href="https://ul.waze.com/ul?q=2G42%2BGC%20Panam%C3%A1&navigate=yes" target="_blank" rel="noopener" aria-label="Cómo llegar con Waze" title="Waze">
      <svg viewBox="0 0 24 24"><path d="M12 3c4.15 0 7.5 3.13 7.5 7 0 2.39-1.35 4.05-2.62 5.2.06.34.12.9.12 1.22 0 .83-.67 1.5-1.5 1.5-.54 0-1.02-.29-1.28-.72-.45.11-.93.17-1.42.17-.48 0-.94-.06-1.38-.18-.24.44-.7.73-1.24.73-.83 0-1.5-.67-1.5-1.5 0-.22.04-.57.11-.88C6.77 14.29 4.5 12.13 4.5 10c0-3.87 3.35-7 7.5-7z" fill="#fff"/><circle cx="9.5" cy="10.4" r="1.1" fill="#2BC3F3"/><circle cx="14.5" cy="10.4" r="1.1" fill="#2BC3F3"/></svg>
    </a>
    <a class="fab whatsapp" href="https://wa.me/50764746168" target="_blank" rel="noopener" aria-label="WhatsApp Figura Rostro KG" title="WhatsApp">
      <svg viewBox="0 0 24 24"><path d="M20.5 3.5A10 10 0 0 0 3.9 17.7L3 21l3.4-.9A10 10 0 1 0 20.5 3.5ZM12 20a8 8 0 0 1-4.1-1.1l-.3-.2-2.4 .6 .6 -2.4 -.2 -.3 A8 8 0 1 1 12 20Zm4-5.3c-.2-.1-1.2-.6-1.4-.7-.2-.1-.4-.1-.6.1l-.5.6c-.1.1-.3.1-.5.1-1 0-2.4-1.1-2.8-1.9-.2-.3-.2-.5 0-.7l.4-.5c.1-.2.1-.3 0-.5l-.7-1.5c-.2-.4-.4-.4-.6-.4h-.5c-.2 0-.5.1-.7.3-.7.7-1.1 1.6-1.1 2.5 0 .3.1 .7.2 1 .6 1.6 2.4 3.3 3.9 3.9 .3 .1 .7 .2 1 .2 .9 0 1.8 -.3 2.5 -1.1 .2 -.2 .3 -.4 .3 -.6 v-.5 c0 -.2 0 -.4 -.2 -.6 Z" fill="#fff"/></svg>
    </a>
  </div>

  <!-- MODAL RESERVA PROMOS -->
  <dialog id="reserveModal" style="border:0;border-radius:16px;max-width:min(520px,92vw);padding:0;overflow:hidden;box-shadow:0 24px 60px rgba(0,0,0,.35)">
    <div style="padding:18px">
      <button id="reserveClose" style="position:absolute;top:8px;right:8px;background:#0008;color:#fff;border:0;width:36px;height:36px;border-radius:999px;cursor:pointer">✕</button>
      <h3 id="reserveTitle" style="margin:.3rem 0 0;color:#7e63c9">Reserva</h3>
      <p id="reserveDesc" style="color:#555;margin:.4rem 0 1rem">¿Quieres reservar esta promoción?</p>
      <a id="reserveWhats" href="#" target="_blank" rel="noopener"
         style="display:inline-block;background:linear-gradient(135deg,var(--lavanda),var(--violeta));color:#fff;text-decoration:none;padding:.6rem 1rem;border-radius:999px;font-weight:700">
         Reservar por WhatsApp
      </a>
    </div>
  </dialog>

  <!-- JS carruseles reutilizables -->
  <script>
    // Registro simple para poder mover carruseles desde el menú
    window.__carousels = {};
    function registerCarousel(id, api){ window.__carousels[id]=api; }
    function goCarousel(id, slide){ const c=window.__carousels[id]; if(c && typeof slide==='number') c.goTo(slide); }

    function initCarousel(rootId,{autoplayMs=6000}={}){
      const root=document.getElementById(rootId); if(!root) return;
      const track=root.querySelector('.carousel-track');
      const slides=[...root.querySelectorAll('.carousel-slide')];
      const prev=root.querySelector('.carousel-nav.prev');
      const next=root.querySelector('.carousel-nav.next');
      const dotsWrap=root.querySelector('.carousel-dots');
      const viewport=root.querySelector('.carousel-viewport');

      dotsWrap.innerHTML='';
      slides.forEach((_,i)=>{
        const b=document.createElement('button');
        b.className='dot'; b.setAttribute('role','tab');
        b.setAttribute('aria-selected',i===0?'true':'false');
        b.title='Slide '+(i+1); b.onclick=()=>goTo(i);
        dotsWrap.appendChild(b);
      });
      const dots=[...dotsWrap.querySelectorAll('.dot')];

      let index=0, count=slides.length, timer=null, isPaused=false;

      function update(){
        track.style.transform=`translateX(-${index*100}%)`;
        slides.forEach((s,i)=>s.setAttribute('aria-hidden',i!==index));
        dots.forEach((d,i)=>d.setAttribute('aria-selected',i===index?'true':'false'));
      }
      function goTo(i){ index=(i+count)%count; update(); }

      const nextSlide=()=>goTo(index+1), prevSlide=()=>goTo(index-1);
      next?.addEventListener('click',nextSlide);
      prev?.addEventListener('click',prevSlide);

      function start(){ clearInterval(timer); timer=setInterval(()=>{ if(!isPaused) nextSlide(); },autoplayMs); }
      viewport.addEventListener('mouseenter',()=>isPaused=true);
      viewport.addEventListener('mouseleave',()=>isPaused=false);
      viewport.setAttribute('tabindex','0');
      viewport.addEventListener('keydown',e=>{ if(e.key==='ArrowRight')nextSlide(); if(e.key==='ArrowLeft')prevSlide(); });

      update(); start();
      registerCarousel(rootId, { goTo });
    }
    initCarousel('facialesCarousel',{autoplayMs:6000});
    initCarousel('corporalesCarousel',{autoplayMs:6000});
  </script>

  <!-- JS carrusel de ofertas -->
 <script>
/* =========================================================
   JS seguro + visor de Promos con cierre suave
   ========================================================= */

/* Utilidad: obtiene elemento o null */
const $ = (sel, ctx=document) => ctx.querySelector(sel);
const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

/* ----------------------------
   WhatsApp “Solicitar” (productos)
   ---------------------------- */
(function setupWA(){
  const cards = $$('.prod-card,[data-producto],[data-precio]');
  cards.forEach(card=>{
    const btn = card.querySelector('.prod-cta,[data-whatsapp]');
    if(!btn) return;
    btn.addEventListener('click', e=>{
      e.preventDefault();
      const nombre = card?.dataset?.producto || 'Producto';
      const precio = card?.dataset?.precio ? `$${card.dataset.precio}` : '';
      const url = `https://wa.me/50764746168?text=Hola,%20me%20interesa%20el%20producto:%20${encodeURIComponent(nombre)}%20${precio? '('+encodeURIComponent(precio)+')':''}%20de%20Figura%20Rostro%20KG.`;
      window.open(url,'_blank','noopener');
    });
  });
})();

/* ----------------------------
   Promos del Mes – visor modal
   Estructura esperada en tu HTML:
   <div id="promoModal" class="promo-modal" aria-hidden="true">
     <div class="promo-backdrop"></div>
     <div class="promo-view" role="dialog" aria-modal="true">
       <button id="promoClose" class="promo-close">X</button>
       <div id="promoViewport" class="promo-viewport">
         <div id="promoTrack" class="promo-track"> ... slides ... </div>
         <div id="promoDots"  class="promo-dots"></div>
       </div>
     </div>
   </div>
   ---------------------------- */
(function promoViewer(){
  const modal = $('#promoModal');
  if(!modal) return;

  const closeBtn = $('#promoClose', modal);
  const backdrop = $('.promo-backdrop', modal);
  const track = $('#promoTrack', modal);

  function open(){
    modal.classList.remove('closing');
    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');
  }
  function close(){
    modal.classList.add('closing'); // animación de salida
    setTimeout(()=>{
      modal.classList.remove('open','closing');
      modal.setAttribute('aria-hidden','true');
      if(track){ track.scrollLeft = track.scrollLeft } // evita “salto” residual
    }, 220); // ligeramente menor al .35s del CSS → cierre fluido
  }

  // Exponer para usos existentes (por si llamas open/close externamente)
  window.promoOpen = open;
  window.promoClose = close;

  // Clicks de cerrar
  if(closeBtn) closeBtn.addEventListener('click', close);
  if(backdrop) backdrop.addEventListener('click', close);

  // Tecla ESC
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && modal.classList.contains('open')) close();
  });

  // Gesto táctil: umbral un poco mayor para evitar cambios involuntarios
  if(track){
    let startX = 0, dx = 0;
    const next = ()=> track.scrollBy({left: track.clientWidth, behavior:'smooth'});
    const prev = ()=> track.scrollBy({left:-track.clientWidth, behavior:'smooth'});

    track.addEventListener('touchstart', e=>{ startX = e.touches[0].clientX; dx = 0 }, {passive:true});
    track.addEventListener('touchmove',  e=>{ dx = e.touches[0].clientX - startX }, {passive:true});
    track.addEventListener('touchend',   ()=>{
      if(Math.abs(dx) > 70){ dx>0 ? prev() : next() }
      // reestabiliza el alto tras un instante
      setTimeout(()=>{ if(track) track.scrollLeft = track.scrollLeft }, 120);
    });

    // Evitar scroll vertical del body si se hace scroll horizontal “fuerte”
    track.addEventListener('wheel', (e)=>{
      if(Math.abs(e.deltaX) > Math.abs(e.deltaY)){ e.preventDefault() }
    }, {passive:false});
  }
})();

/* ----------------------------
   Lightbox de Galería (si lo usas)
   ---------------------------- */
// Mantén tu implementación actual. Con el CSS nuevo
// ya queda centrado y sin bandas negras raras.

/* ----------------------------
   Cualquier JS extra tuyo (sliders, tabs, etc.)
   ---------------------------- */
// (Si tienes más código, colócalo aquí debajo…)
</script>


  <!-- JS video + lightbox -->
  <script>
    (function(){
      const btnFull=document.getElementById('yt-full');
      const modal=document.getElementById('videoModal')||(()=>{const d=document.createElement('dialog');d.id='videoModal';d.className='video-modal';d.innerHTML=`<button class="close-btn" id="videoClose">✕</button><div class="ratio"><iframe id="yt-modal" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div>`;document.body.appendChild(d);return d})();
      const closeBtn=document.getElementById('videoClose');
      const ytInline=document.getElementById('yt-embed');
      const ytModal=document.getElementById('yt-modal');
      function getId(){const m=ytInline.src.match(/embed\/([^?]+)/);return m?m[1]:''}
      btnFull?.addEventListener('click',()=>{const id=getId();ytModal.src=`https://www.youtube.com/embed/${id}?rel=0&autoplay=1`;modal.showModal();document.documentElement.style.overflow='hidden';});
      closeBtn?.addEventListener('click',()=>{ytModal.src='';modal.close();document.documentElement.style.overflow='';});
      const a=document.getElementById('yt-open');const id=getId(); if(a&&id) a.href=`https://www.youtube.com/watch?v=${id}`;
    })();

    (function(){
      const grid=document.getElementById('mediaGrid'); if(!grid) return;

      let dialog=document.getElementById('lightbox');
      if(!dialog){
        dialog=document.createElement('dialog');
        dialog.id='lightbox';
        dialog.innerHTML=`<div class="lightbox-body"><button class="lightbox-close" aria-label="Cerrar">✕</button><div class="ratio"><div id="lightboxContent"></div></div></div>`;
        document.body.appendChild(dialog);
      }
      const closeBtn=dialog.querySelector('.lightbox-close');
      const content=dialog.querySelector('#lightboxContent');

      function lockScroll(lock){document.documentElement.style.overflow=lock?'hidden':'';document.body.style.overflow=lock?'hidden':'';}
      function openLightbox(node){content.innerHTML='';content.appendChild(node);dialog.showModal();lockScroll(true);}
      function closeLightbox(){content.innerHTML='';dialog.close();lockScroll(false);}

      grid.addEventListener('click',e=>{
        const fig=e.target.closest('figure'); if(!fig) return;
        const type=fig.dataset.type, src=fig.dataset.src, poster=fig.dataset.poster||'';
        if(type==='image'){const img=new Image(); img.src=src; img.alt=fig.querySelector('img')?.alt||'Imagen'; openLightbox(img);}
        else if(type==='video'){const v=document.createElement('video'); v.src=src; v.controls=true; v.autoplay=true; if(poster) v.poster=poster; openLightbox(v);}
      });

      closeBtn.addEventListener('click',closeLightbox);
      dialog.addEventListener('close',()=>{content.innerHTML='';lockScroll(false);});
      dialog.addEventListener('click', (e)=>{
        const box = content.getBoundingClientRect();
        const fuera = e.clientX < box.left || e.clientX > box.right || e.clientY < box.top || e.clientY > box.bottom;
        if(fuera) closeLightbox();
      });
      dialog.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLightbox(); });
    })();

    document.getElementById('y')?.append(new Date().getFullYear());

    // Tabs + scroll suave + CTA sincronizado con carruseles
    (function(){
      const btns=[...document.querySelectorAll('#menu-servicios .tab-btn')];
      const panels=[...document.querySelectorAll('#menu-servicios .tab-panel')];
      function show(id){
        btns.forEach(b=>{const active=b.dataset.tab===id; b.classList.toggle('active',active); b.setAttribute('aria-selected',active?'true':'false');});
        panels.forEach(p=>p.classList.toggle('hidden',p.id!==id));
      }
      btns.forEach(b=>b.addEventListener('click',()=>show(b.dataset.tab)));
      show('faciales-tab');

      function highlight(el){ if(!el) return; el.style.outline='3px solid rgba(126,99,201,.25)'; el.style.boxShadow='0 0 0 6px rgba(126,99,201,.12) inset'; setTimeout(()=>{el.style.outline='';el.style.boxShadow='';},1500); }

      document.addEventListener('click',function(e){
        const a=e.target.closest('a.srv-cta[data-go]'); if(!a) return;
        e.preventDefault();
        const spec = JSON.parse(a.getAttribute('data-go'));
        const sec = spec?.section ? document.getElementById(spec.section) : null;
        if(sec){ sec.scrollIntoView({behavior:'smooth',block:'start'}); highlight(sec.querySelector('h2')||sec); }
        if(spec?.carousel){ setTimeout(()=>goCarousel(spec.carousel, spec.slide ?? 0), 300); }
        setTimeout(()=>{ window.open(a.href,'_blank','noopener'); }, 600);
      }, true);

      // FAB: en móvil → Faciales, en desktop → Menú
      const toMenu=document.getElementById('fabMenu');
      toMenu?.addEventListener('click',function(e){
        e.preventDefault();
        const isMobile = window.matchMedia('(max-width:640px)').matches;
        const targetId = isMobile ? 'tratamientos-faciales' : 'menu-servicios';
        document.getElementById(targetId)?.scrollIntoView({behavior:'smooth', block:'start'});
      });
    })();
  </script>

  <!-- SWIPE & UX ENHANCEMENTS (Promos) -->
  <script>
  (function(){
    function addSwipe(container, onPrev, onNext){
      if(!container) return;
      let x0=null, y0=null, lock=false;
      const TH=18;
      container.addEventListener('touchstart',e=>{
        const t=e.changedTouches[0]; x0=t.clientX; y0=t.clientY; lock=false;
      },{passive:true});
      container.addEventListener('touchmove',e=>{
        if(x0===null || lock) return;
        const t=e.changedTouches[0], dx=t.clientX-x0, dy=t.clientY-y0;
        if(Math.abs(dy)>Math.abs(dx)) { lock=true; return; }
        if(Math.abs(dx)>TH){ dx<0 ? onNext?.() : onPrev?.(); x0=null; }
      },{passive:true});
    }

    const offViewport = document.querySelector('.offers-viewport');
    const offPrev = document.querySelector('.offer-nav.prev');
    const offNext = document.querySelector('.offer-nav.next');

    addSwipe(offViewport, ()=>offPrev?.click(), ()=>offNext?.click());

    document.addEventListener('visibilitychange', ()=>{
      const evt = new Event(document.hidden ? 'mouseenter' : 'mouseleave');
      offViewport?.dispatchEvent(evt);
    });
  })();
  </script>

  <!-- WhatsApp helpers (promos + productos) -->
  <script>
    const WA_NUMBER = "50764746168";
    function waLink(text){
      const t = encodeURIComponent(text);
      return `https://wa.me/${WA_NUMBER}?text=${t}`;
    }

    // Promos → Modal de reserva con WhatsApp
    (function(){
      const modal = document.getElementById('reserveModal');
      const closeBtn = document.getElementById('reserveClose');
      const title = document.getElementById('reserveTitle');
      const desc = document.getElementById('reserveDesc');
      const btn = document.getElementById('reserveWhats');
      const slides = document.querySelectorAll('.offer-slide');

      slides.forEach(slide=>{
        slide.addEventListener('click', e=>{
          if(e.target.closest('a,button')) return; // evitar doble click
          const name = slide.querySelector('h3')?.textContent?.trim() || 'Promoción';
          title.textContent = name;
          desc.textContent = '¿Deseas reservar esta promoción? Te atendemos por WhatsApp.';
          btn.href = waLink(`Hola, me interesa la promoción: ${name} en Figura Rostro KG.`);
          modal.showModal();
          document.documentElement.style.overflow='hidden';
        });
      });
      closeBtn?.addEventListener('click', ()=>{ modal.close(); document.documentElement.style.overflow=''; });
      modal?.addEventListener('click', (e)=>{
        const box = modal.getBoundingClientRect();
        if(e.clientY < box.top || e.clientY > box.bottom || e.clientX < box.left || e.clientX > box.right){
          modal.close(); document.documentElement.style.overflow='';
        }
      });
    })();

    // Productos → botón Solicitar con mensaje prellenado
    (function(){
      document.querySelectorAll('[data-whatsapp]').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          e.preventDefault();
          const card = btn.closest('.prod-card');
          const nombre = card?.dataset.producto || 'Producto';
          const precio = card?.dataset.precio ? `$${card.dataset.precio}` : '';
          const url = waLink(`Hola, me interesa el producto: ${nombre} ${precio ? '('+precio+')' : ''} de Figura Rostro KG.`);
          window.open(url, '_blank', 'noopener');
        });
      });
    })();
  </script>
 <!-- Visor full-screen de Promos (móvil) -->
<div id="promoModal" class="promo-modal" aria-hidden="true">
  <div class="promo-backdrop"></div>
  <div class="promo-view" role="dialog" aria-modal="true" aria-label="Visor de promociones">
    <div class="promo-head">
      <h4 class="promo-title">Promoción</h4>
      <button class="promo-close" id="promoClose" aria-label="Cerrar">✕</button>
    </div>
    <div class="promo-viewport">
      <div class="promo-track" id="promoTrack"><!-- slides dinámicos --></div>
      <div class="promo-dots" id="promoDots"></div>
    </div>
  </div>
</div>
 <script>
(function(){
  const mobileOffers = [...document.querySelectorAll('#ofertas .offers-mobile .m-offer')];
  if (!mobileOffers.length) return;

  const modal   = document.getElementById('promoModal');
  const track   = document.getElementById('promoTrack');
  const dotsBox = document.getElementById('promoDots');
  const titleEl = modal.querySelector('.promo-title');
  const btnClose= document.getElementById('promoClose');
  let index = 0, touchStartX = 0, touchDX = 0;

  // Construye slides con el contenido de las tarjetas móviles
  mobileOffers.forEach((card, i) => {
    const slide = document.createElement('section');
    slide.className = 'pm-slide';

    // extrae título, texto, precio, botón e imagen
    const h3    = card.querySelector('h3')?.outerHTML || '<h3>Promo</h3>';
    const paras = [...card.querySelectorAll('.m-body p')].map(p=>p.outerHTML).join('');
    const btn   = card.querySelector('.m-btn')?.outerHTML || '';
    const img   = card.querySelector('.m-img')?.outerHTML || '';

    slide.innerHTML = `
      <div class="pm-body">
        ${h3}
        ${paras}
        ${btn}
      </div>
      ${img}
    `;
    track.appendChild(slide);

    // dot
    const dot = document.createElement('span');
    dot.className = 'dot';
    dot.setAttribute('role','tab');
    dot.addEventListener('click', ()=> goTo(i));
    dotsBox.appendChild(dot);

    // abrir visor al tocar una card
    card.addEventListener('click', ()=> open(i));
  });

  function update(){
    track.style.transform = `translateX(-${index*100}%)`;
    dotsBox.querySelectorAll('.dot').forEach((d,i)=> d.setAttribute('aria-current', i===index ? 'true':'false'));
    const currentH3 = track.children[index]?.querySelector('h3')?.textContent?.trim() || 'Promoción';
    titleEl.textContent = currentH3;
  }

  function open(i=0){
    index=i; update();
    modal.classList.add('open');
    document.documentElement.classList.add('body-lock'); // evita scroll fondo
    modal.setAttribute('aria-hidden','false');
  }

  function close(){
    modal.classList.remove('open');
    document.documentElement.classList.remove('body-lock');
    modal.setAttribute('aria-hidden','true');
  }

  function goTo(i){
    const count = track.children.length;
    index = (i + count) % count;
    update();
  }
  function next(){ goTo(index+1); }
  function prev(){ goTo(index-1); }

  // Cerrar
  btnClose.addEventListener('click', close);
  modal.querySelector('.promo-backdrop').addEventListener('click', close);
  document.addEventListener('keydown', (e)=>{ if(modal.classList.contains('open') && e.key==='Escape') close(); });

  // Gestos táctiles
  track.addEventListener('touchstart', (e)=>{ touchStartX = e.touches[0].clientX; touchDX=0; }, {passive:true});
  track.addEventListener('touchmove',  (e)=>{ touchDX = e.touches[0].clientX - touchStartX; }, {passive:true});
  track.addEventListener('touchend',   ()=>{
    if (Math.abs(touchDX) > 50){ touchDX<0 ? next() : prev(); }
  });

  // Evitar scroll del body al hacer scroll horizontal accidental
  track.addEventListener('wheel',(e)=>{ if(Math.abs(e.deltaX) > Math.abs(e.deltaY)) e.preventDefault(); }, {passive:false});
})();
</script>
<script>
(function(){
  // si no existe el visor, no hace nada
  const modal = document.getElementById('promoModal');
  if(!modal) return;
  const track = document.getElementById('promoTrack');
  const titleEl = modal.querySelector('.promo-title');
  let index = 0, startX = 0, dx = 0;

  // helper: actualiza (relee index que ya maneja el script anterior)
  function _currentIndex(){
    // intentar inferir índice desde transform actual
    const m = /translateX\\(-([\\d.]+)%\\)/.exec(track.style.transform||'');
    return m ? Math.round(parseFloat(m[1])/100) : index;
  }
  function ensureReadable(){
    index = _currentIndex();
    const slide = track.children[index];
    if(slide){ slide.scrollTo({top:0, behavior:'instant'}); }
    const h3 = slide?.querySelector('h3')?.textContent?.trim() || 'Promoción';
    titleEl.textContent = h3;
  }

  // enganche simple a apertura: cuando el modal entra en DOM abierto
  const obs = new MutationObserver(()=>{
    if(modal.classList.contains('open')){ 
      setTimeout(ensureReadable, 50);
    }
  });
  obs.observe(modal, { attributes:true, attributeFilter:['class'] });

  // gesto con umbral un poco mayor para evitar cambios involuntarios
  track.addEventListener('touchstart', e=>{ startX=e.touches[0].clientX; dx=0; }, {passive:true});
  track.addEventListener('touchmove',  e=>{ dx = e.touches[0].clientX - startX; }, {passive:true});
  track.addEventListener('touchend',   ()=>{
    if(Math.abs(dx) > 70){ /* <- umbral mayor */
      // dejamos que el script de navegación existente haga next/prev
      // aquí solo reseteamos scroll del nuevo slide tras 120ms
      setTimeout(ensureReadable, 120);
    }
  });
})();
</script>
<script>
  const promos = document.querySelectorAll('.offer-card img');
  const modal = document.getElementById('promoModal');
  const body = document.body;

  promos.forEach(img => {
    img.addEventListener('click', () => {
      modal.removeAttribute('aria-hidden');
      modal.classList.add('open');
      body.style.overflow = 'hidden';
    });
  });

  const closeBtn = document.getElementById('promoClose');
  closeBtn.addEventListener('click', () => {
    modal.setAttribute('aria-hidden', 'true');
    modal.classList.remove('open');
    body.style.overflow = '';
  });
</script>

</body>
</html>


